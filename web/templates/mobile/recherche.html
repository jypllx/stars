{% extends "_base_mobile.html" %}

{% block content %}
<div class="row">
    <form method="post" action="{{url_for('mob_search')}}">
        <div class="col-xs-12">
            <div class="row">
                <h3><p class="text-center">Rechercher</p></h3>
            </div>
            <div class="row">
                <input name="search" placeholder="Recherche" type="text" class="form-control">
            </div>
            <br/>
            <div class="row time-filter">
                <div class="col-xs-3"><a class="btn btn-block btn-default btn-time" value="0" id="time0"><i class="fa fa-hourglass-o"></i>&nbsp;0-5m</a></div>
                <div class="col-xs-3"><a class="btn btn-block btn-default btn-time" value="1" id="time1"><i class="fa fa-hourglass-end"></i>&nbsp;5-20m</a></div>
                <div class="col-xs-3"><a class="btn btn-block btn-default btn-time" value="2" id="time2"><i class="fa fa-hourglass-half"></i>&nbsp;20m-1h</a></div>
                <div class="col-xs-3"><a class="btn btn-block btn-default btn-time" value="3" id="time3"><i class="fa fa-hourglass-start"></i>&nbsp;+1h</a></div>
                <input id="cat_time" type="hidden" name="cat_time" value="">
            </div>
            <br/>
            <div class="row type-filter">
                <div class="col-xs-3"><a class="btn btn-block btn-default btn-type" value="0" id="type0"><p>News</p><p>&nbsp;</p></a></div>
                <div class="col-xs-3"><a class="btn btn-block btn-default btn-type" value="1" id="type1"><p>Repor</p><p>tage</p></a></div>
                <div class="col-xs-3"><a class="btn btn-block btn-default btn-type" value="2" id="type2"><p>Livre</p><p>&nbsp;</p></a></div>
                <div class="col-xs-3"><a class="btn btn-block btn-default btn-type" value="3" id="type3"><p>Confé</p><p>rence</p></a></div>
                <input id="cat_type" type="hidden" name="cat_type" value="">
            </div>
            {% for tag in tags %}
            <div class="row">
                <p class="text-center"><b>{{tag.name}}</b></p>
            </div>
            <div class="row">
                {% if tag.playlists %}
                {% set i=0 %}
                {% for p in tag.playlists %}
                {% if i < 4 %}
                <div class="col-xs-3"><a class="btn btn-default btn-block btn-playlist" id="{{p.id}}">{{p.name|truncate(9)}}</a></div>
                {% set i=i+1 %}
                {% endif %}
                {% endfor %}
                {% endif %}
            </div>
            {% endfor %}

            <input id="playlist" type="hidden" name="playlist_id" value="">
            <div class="row">
                <p class="text-center"><b>Vos chaînes préférées</b></p>
            </div>

            <div class="row">
            {% for channel in channels %}
                <div class="col-xs-3"><a class="btn btn-default btn-block btn-channel" id="{{channel.id}}">{{channel.name|truncate(9)}}</a></div>
            {% endfor %}
            </div>
            <input id="channel" type="hidden" name="channel_id" value="">
        </div>
    </form>
</div>
{% endblock %}

{% block js %}
<script type="text/javascript">
    $(document).ready(function(){
        search = function() {
            $('form').submit()
        }
        $(".btn-time").click(function(){
            $('#cat_time').attr('value', $(this).attr('value'))
            search()
        });
        $(".btn-type").click(function(){
            $('#cat_type').attr('value', $(this).attr('value')) 
            search()
        });
        $(".btn-playlist").click(function(){
            $('#playlist').attr('value', $(this).attr('id'))
            search()
        });
        $(".btn-channel").click(function(){
            $('#channel').attr('value', $(this).attr('id'))
            search()
        });
    });
</script>
{% endblock %}